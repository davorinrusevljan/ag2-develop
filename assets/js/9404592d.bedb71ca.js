"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4789],{28499:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=t(85893),s=t(11151);const r={sidebar_label:"swarm_agent",title:"agentchat.contrib.swarm_agent"},i=void 0,l={id:"reference/agentchat/contrib/swarm_agent",title:"agentchat.contrib.swarm_agent",description:"initiate\\swarm\\chat",source:"@site/docs/reference/agentchat/contrib/swarm_agent.md",sourceDirName:"reference/agentchat/contrib",slug:"/reference/agentchat/contrib/swarm_agent",permalink:"/ag2/docs/reference/agentchat/contrib/swarm_agent",draft:!1,unlisted:!1,editUrl:"https://github.com/ag2ai/ag2/edit/main/website/docs/reference/agentchat/contrib/swarm_agent.md",tags:[],version:"current",frontMatter:{sidebar_label:"swarm_agent",title:"agentchat.contrib.swarm_agent"},sidebar:"referenceSideBar",previous:{title:"society_of_mind_agent",permalink:"/ag2/docs/reference/agentchat/contrib/society_of_mind_agent"},next:{title:"text_analyzer_agent",permalink:"/ag2/docs/reference/agentchat/contrib/text_analyzer_agent"}},o={},c=[{value:"initiate_swarm_chat",id:"initiate_swarm_chat",level:3},{value:"SwarmResult",id:"swarmresult",level:2},{value:"SwarmAgent",id:"swarmagent",level:2},{value:"register_hand_off",id:"register_hand_off",level:3},{value:"generate_swarm_tool_reply",id:"generate_swarm_tool_reply",level:3}];function d(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h3,{id:"initiate_swarm_chat",children:"initiate_swarm_chat"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'def initiate_swarm_chat(\n    init_agent: "SwarmAgent",\n    messages: Union[List[Dict[str, Any]], str],\n    agents: List["SwarmAgent"],\n    user_agent: Optional[UserProxyAgent] = None,\n    max_rounds: int = 20,\n    context_variables: Optional[Dict[str, Any]] = None,\n    after_work: Optional[Union[AFTER_WORK, Callable]] = AFTER_WORK(\n        AfterWorkOption.TERMINATE)\n) -> Tuple[ChatResult, Dict[str, Any], "SwarmAgent"]\n'})}),"\n",(0,a.jsx)(n.p,{children:"Initialize and run a swarm chat"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"init_agent"})," - The initial agent of the conversation."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"messages"})," - Initial message(s)."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"agents"})," - List of swarm agents."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"user_agent"})," - Optional user proxy agent for falling back to."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"max_rounds"})," - Maximum number of conversation rounds."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"context_variables"})," - Starting context variables."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"after_work"})," - Method to handle conversation continuation when an agent doesn't select the next agent. If no agent is selected and no tool calls are output, we will use this method to determine the next agent.\nMust be a AFTER_WORK instance (which is a dataclass accepting a SwarmAgent, AfterWorkOption, A str (of the AfterWorkOption)) or a callable.\nAfterWorkOption:\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"TERMINATE (Default): Terminate the conversation."}),"\n",(0,a.jsx)(n.li,{children:"REVERT_TO_USER : Revert to the user agent if a user agent is provided. If not provided, terminate the conversation."}),"\n",(0,a.jsx)(n.li,{children:"STAY : Stay with the last speaker."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"Callable"})," - A custom function that takes the current agent, messages, groupchat, and context_variables as arguments and returns the next agent. The function should return None to terminate.\n",(0,a.jsx)(n.code,{children:"python           def custom_afterwork_func(last_speaker: SwarmAgent, messages: List[Dict[str, Any]], groupchat: GroupChat, context_variables: Optional[Dict[str, Any]]) -> Optional[SwarmAgent]:           "})]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Returns"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"ChatResult"})," - Conversations chat history.\nDict[str, Any]: Updated Context variables."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"SwarmAgent"})," - Last speaker."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"swarmresult",children:"SwarmResult"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"class SwarmResult(BaseModel)\n"})}),"\n",(0,a.jsx)(n.p,{children:"Encapsulates the possible return values for a swarm agent function."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"values"})," ",(0,a.jsx)(n.em,{children:"str"})," - The result values as a string."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"agent"})," ",(0,a.jsx)(n.em,{children:"SwarmAgent"})," - The swarm agent instance, if applicable."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"context_variables"})," ",(0,a.jsx)(n.em,{children:"dict"})," - A dictionary of context variables."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"swarmagent",children:"SwarmAgent"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"class SwarmAgent(ConversableAgent)\n"})}),"\n",(0,a.jsx)(n.p,{children:"Swarm agent for participating in a swarm."}),"\n",(0,a.jsx)(n.p,{children:"SwarmAgent is a subclass of ConversableAgent."}),"\n",(0,a.jsx)(n.p,{children:"Additional args:\nfunctions (List[Callable]): A list of functions to register with the agent."}),"\n",(0,a.jsx)(n.h3,{id:"register_hand_off",children:"register_hand_off"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"def register_hand_off(hand_to: Union[List[Union[ON_CONDITION, AFTER_WORK]],\n                                     ON_CONDITION, AFTER_WORK])\n"})}),"\n",(0,a.jsx)(n.p,{children:"Register a function to hand off to another agent."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Arguments"}),":"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"hand_to"})," - A list of ON_CONDITIONs and an, optional, AFTER_WORK condition"]}),"\n",(0,a.jsx)(n.p,{children:"Hand off template:\ndef transfer_to_agent_name() -> SwarmAgent:\nreturn agent_name"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"register the function with the agent"}),"\n",(0,a.jsx)(n.li,{children:"register the schema with the agent, description set to the condition"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"generate_swarm_tool_reply",children:"generate_swarm_tool_reply"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"def generate_swarm_tool_reply(\n        messages: Optional[List[Dict]] = None,\n        sender: Optional[Agent] = None,\n        config: Optional[OpenAIWrapper] = None) -> Tuple[bool, dict]\n"})}),"\n",(0,a.jsx)(n.p,{children:"Pre-processes and generates tool call replies."}),"\n",(0,a.jsx)(n.p,{children:"This function:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Adds context_variables back to the tool call for the function, if necessary."}),"\n",(0,a.jsx)(n.li,{children:"Generates the tool calls reply."}),"\n",(0,a.jsx)(n.li,{children:"Updates context_variables and next_agent based on the tool call response."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>i});var a=t(67294);const s={},r=a.createContext(s);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);